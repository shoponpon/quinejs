---
theme: "Moon"
transition: "slide"
transitionSpeed: "fast"
progress: true
slideNumber: true
---

## JavaScriptで描くAA Quine
2019/11/06 Ginza.js

---

### 自己紹介
![Twitter Icon](https://pbs.twimg.com/profile_images/1185129772994588673/AtHOh6Qy.jpg)
 - shopon (@sho_oishi)
 - 新卒ウェブエンジニア1年目
 - Electronがすき
 - 趣味でイラストを描く

---

### 今日話すこと
 - Quineとは
 - JavaScriptでQuineを書く方法
 - AA Quineを描くテクニック

---

### 今日話さないこと
 - 明日使える素晴らしいJavaScriptテクニック
 - Quineが何の役にたつか
 - 最適最良なQuineの書き方

---

## Quine?

---

### Quine #とは
 - 自分自身を出力するプログラム
 - 例：山手Quine, Clock...
 - 書き方は様々ある
   - 今回は1つを紹介

---

### JavaScriptでQuine
```JavaScript
(
    f = () => {
        console.log('(f=' + f + ')()')
    }
)()

//1行で書くとこう
(f=()=>{console.log('(f='+f+')()');})()
```
これがベースになる

---

### AA Quineを描いてみる

---

### 基本
 1. スペースの入っていないプログラムを書く
 1. アスキーアートに合わせてプログラムを出力
 1. ベースとなるQuineに組み込む

---

### イラストを用意
![Base Image](img/base.png)

---

### 2値化
![Base Image](img/binary.png)

---

### AA化
```

                                                   ......J++++g++J(....
                                            ...gMMY9"7<<~.~~~~~~~~~_<7"TMMNNaJ..
                                        ..gMB"!~~~~~~~~.~~.~.~.~.~.~~~~~~~~_?""WMMm-.
                                     .J#5:~~~~.~.~.~.~~~.~~.~~.~~.~.~..~.~.~~~~~~~~?TMN,.
                                  .J#"~~~~.~~.~~~.~~.~.~~.~~~.~~~~~~.~~.~~.~.~.~~.~~~~_?WN,
                                .dB~~.~~.~~.~~.~_+-~~.~~.~~.~~.~..~~~~~~~.~~~.~.~~.~.~~~~_TN,
                             ..N@=~.~~..~~.~~.~~d#_~~~.~~~.~~.~(<~..~..~.~.~.~~.~.~.~..~.~._7N,                    
                            (M#^...~..~~.~.~.~~(M!.~.~~.~.~.~~.~d/~.~.~.~.~..~.~.~.~.~..~.~.~_TN,
                          .M#~..~.~.~.~..~..~.(M3.~.~..~..~..~.~JN~..~.~..~.~..~..~.~.~.~..~..~/Mx
                         JMt.....~...~..~.~~.(MD.~.~..~.~..~..~._Mc.~..~..~..~..~......~.......~_Wb              
                       .M@~.........~.._..~.(MF~..~.~~..~.~..~...d@~.....~.........~......~..~.__.dN.
                      .NF....(J_..~..~db~..(MM>.~...........~....(M/...............(x,........_    ?N.        
                     -M$   .(g'......(M~.._dNF...~.~..~..~........MF~...............(k,..  .  .     ?N.
                    JM^    (N>   ..~_dF.._d#M}_   .....~......__..(M[....._   .--._  (m__  .  ._    ~db            
                  .dM$    (M%    -  (M!  (#jN~    .~.__.._ ..    .(NN,_  ~.   .(N_.   db............~~dL
                  dNF....(M3    ...gN@_.(M>j#.    ~.~..~.. .~_   ..MNb..~..~...(Mb....(M/~.~.~~.~~~~~~(M,        
                 .N#~~~~-dF..  .~~(MM]~(MD;d#~~-.~.~.~~.~.~.....~~~g#M/~.~~(~.~~dm~~.~~?N_~.~~.~~~~~~~~Jb             
                .N#<~~~~j@~~~~~~~(MEM$~j#;!(#~~~~~~~~~~~~~~~~~~~~~~J#Mb~~~~Nc~~~JN{~~~~~M2~~~~~~~~~~~~~:M;         
                JND~~~~(#~~~~~~~_d@;M>(MD< ,N~~~~~~~~~~~~~~~~~~~~~~(MJN~~~~d#~~~(Mr~~~~~d#~~~~~~~~~~~:::J@
               .Mt~~~~(M3~~~~~~~j#<;Ml(#;  .N~~~~~~~~~~~~~~~~~~~~~~(9?Mc~~~dNc~~~Mb~~~~~(M/~(,~~~~::~:::;M.   
               (@_~~~~j@~:((qWWMMMMMMNMNa-..W[::::~:~:~~:~~::::~::((m+MNdHBMMNY77d@<::~::Mb:(N_:::::::::;d]          
              .Mi~~~:(N::~:_::(M>;< MPM$  .?dN::::(-::::::::::::(76db;JN:::MPMP::JN::::::dN[(M<:::::::::;J#
              .D>:::~d5:::j#:(M3<!  d#Nl.... M2:::d#:::::::::::::::Mb;JN<:+M$?N<:+N<:::::(NR+#::::><::::>jM        
              v(I:::(#:::(MDjN3<    (NM<...  (N:::JM<:::::::::::::jMn++MI;j#<;dN;jM<:::::<M$J#::;:Wc;;;;<>M}     
              _d::::jD:::+MuM5<  ..gNMMNNMNgHKHR::jNP;::;:::::::;;jMgJJMPjMt <<MRJN<;;:;;;M>j@;;:;qp;:;:<>M)          
              (@:::<M<::+d#M@<.(NMMMMMMMMMN#T5?Mx;jMN<;;;;;;;;;;:+MMNNNNMMN,. ~?MgM<;:;:;;M>gP:;;;d@;:;;<>d[
             ~d6:::j#:;:jMB8uMMNMMMMMMMMMMM#_  ,NJ+MNp;::;:;:;:;;jMMMMMMNMMMMNa,?HN<;:;;::MCMI;::;db;;:;<>d@       
             (#I:;:gP;;;JNQMNMB<dMM8MNNN#TM#    (NcMMM;;:;;:;:;:jNMMMMMMMMN#?TMNNgN<;;:;;;Mu#;;;:;MD;:;;<>d@
             jD;;:;MI;:;dNMM5<~ (N#<dNNN@<TP     ,YdNdMejNJj++++MNMDMMMN#ZM# _<?MNM<:;;::;Md@;:;;:MPje;:<>dF
            _MC;;;<N>;:;JNM<_    H@(;?Y3~          (M].TM@W977UN@WMI?MMM3~~      UM<;:;;:jMM$:;:;+MC+N<;>+M]     
            (#;:;;jM<;;:JMMb      WNQ&+gg2!         -!           .Mb::;:<._      ,N;;:;;;jNM;;:;:jM;:M2;>jM\
            j@;:;:jM;:;;(MN_-..     7""                            TMNgk#9^      .N;;::;:dM5;;;;;JN:;dP;>JN 
           -M3:;;;jNI;:;:MMb-._?(?OnQ&ac!             .. .                     ._d#;;;;:;MMm;::;:d@;;jb;>zG        
           (#;jJ;;dMP;:;:dM#.~~~~.....              .........      ......(.JY/...J@::;:;j#(HN+;:;N$:;jK<>jN:
           (#;dp;;dM@:;;;JF...._.....                    .  .          _...~~~...dD;;:;;g@<_NR;;jM<;:+Nc>jN}
           gE+MC;<zTN<;;:j@  .                                         ....._..._MC;:;;+M><(MD;;J@;;d<Mb>+M)     
           dDJM:;<1+Mr:;;;H                                                 .....#;;:;:j#!_g#;:<dI;+NIMb>+M}
           N$dN;;;+zJN;::;d,                        kMHHHHHWHWQJ,               J$;:;;jM!_dM>:;jMD;+NIM$>jN}
           NId#;;;>>>M2;;:+L                        MI?<<<<<<<>dN               $;;:;:dF(dE;:;jM#:;jNIN3>jN
           MPd#;;;z>>JN;;:;d<                       ?b:~:~~:~::(#              .+;:;;jNg(;;;;:JM<;;JMj#>?d#        
           MRd@;:?z>?>Mp;;;<Ng,                      4m~::~:~~(M^             .j$;:;jW9>;:;:;jM>;;<d#jE>>MF
           d@d@>;jw?>>?N+:;<?vTMN+..                  7Ne.:~(JM=             .j#<;;;Z$;;:;:<d#;;:<>M$W1>uM 
           (Nd@n;jWz>?>dN<:;1+====TTMMH&(....           (=? !          ....MEjN5;::uP;;:;;jM@;;:<?j#jD>?MF       
           .MdNd2;MN<>>?dN;;js+=========zOZTYHMMMMHQagaJJJ.........JgMMBTUI1dM@;;<d@:;:;++X3;:;<>>d1K>?j#
            HKMJN<?MN+>>>dN;;dm<1====================uxzuggM8;;;<MNgz=====udN#>:jME;;;jgM6;jJ+<>>j3d1>uM!
            .MMRWNxdMN2>>>dNJ;dNg<1=dNe===========uggMMMMNa>;;;;jgMMMNmg&gMHMC;jM3:<jMM6<j+M81?ud1dC>uM^
             (NMx?MsdNMNx>+MMm+WNMmJ?dMNgz=dme==1dMBTMHM2THMNgNMMB"7"WMNMBgM3jME+jgMBagMNMB1ugM5jM1>uM%            
              ?NN~.TMgMNWNmxMMNaWN(TMNgMMNNMMMMadF...-NYN.         ,HMMMMNMGdMgMMMMH""1dNgMB= .g#1>gM'
               .T^ ~_?THMmJTWTTTMMNJ  .7^^ 7""uMMNJM! ZbM"Wg.        dF.MMMH""^   ?WM"""^    .MBuNM@
                                  -"5       .MM96tMNe  ?N.t.TN&.gMMMMMMMNMMx             ..JNMM"WT'  ..
             ._::_                        .dM#Z1++?dMN, db  udM5:::;7YTMNdMMN,         ."""=!        ~~~_.         
            -~:~~     .                  .M1rQMMMMMMNMMN,WpdMagagmgJ<:jrYNUUXMN.               ..      _ 
                     _:~     ...        (NiQMNMN0UMMMNMM#QMMMMMMHNKMN+(tO ~_wQ@        ..     -~:~
                    _:~~     ~:~        (MRWM0C<<++&&JMbdM5:;<+++<7MMHNkr  (MP         ~~_     _~_               
                             _~~         .WMzugWMWRNmMM#MNdMMY9YMMmyMNWNg(dMN&.        _~_
                                           WMmWMkkwgM"=  WMMMNMMNNNMMNYTYT3<<T\                                
                                               ??!         ?7""TT"?HB""<<?!          
```

---

### AA化(スペース以外1)
```

                                                   11111111111111111111
                                            111111111111111111111111111111111111
                                        111111111111111111111111111111111111111111111
                                     1111111111111111111111111111111111111111111111111111
                                  111111111111111111111111111111111111111111111111111111111
                                1111111111111111111111111111111111111111111111111111111111111
                             111111111111111111111111111111111111111111111111111111111111111111                    
                            111111111111111111111111111111111111111111111111111111111111111111111
                          111111111111111111111111111111111111111111111111111111111111111111111111
                         11111111111111111111111111111111111111111111111111111111111111111111111111              
                       111111111111111111111111111111111111111111111111111111111111111111111111111111
                      1111111111111111111111111111111111111111111111111111111111111111111111111    111        
                     111   11111111111111111111111111111111111111111111111111111111111111  1  1     111
                    111    111   11111111111111   1111111111111111111111111   11111  1111  1  11    111            
                  1111    111    1  111  11111    11111111 11    111111  11   11111   111111111111111111
                  1111111111    11111111111111    11111111 111   1111111111111111111111111111111111111111        
                 111111111111  11111111111111111111111111111111111111111111111111111111111111111111111111             
                111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111         
                11111111111111111111111111 111111111111111111111111111111111111111111111111111111111111111
               11111111111111111111111111  1111111111111111111111111111111111111111111111111111111111111111   
               11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111          
              111111111111111111111 1111  11111111111111111111111111111111111111111111111111111111111111111
              11111111111111111111  11111111 11111111111111111111111111111111111111111111111111111111111111        
              111111111111111111    1111111  111111111111111111111111111111111111111111111111111111111111111     
              11111111111111111  1111111111111111111111111111111111111111111 1111111111111111111111111111111          
              111111111111111111111111111111111111111111111111111111111111111 111111111111111111111111111111
             11111111111111111111111111111111  1111111111111111111111111111111111111111111111111111111111111       
             1111111111111111111111111111111    111111111111111111111111111111111111111111111111111111111111
             111111111111111111 111111111111     111111111111111111111111111 1111111111111111111111111111111
            11111111111111111    11111111          111111111111111111111111      111111111111111111111111111     
            1111111111111111      111111111         11           1111111111      111111111111111111111111111
            1111111111111111111     111                            11111111      11111111111111111111111111 
           111111111111111111111111111111             11 1                     1111111111111111111111111111        
           111111111111111111111111111              111111111      11111111111111111111111111111111111111111
           11111111111111111111111111                    1  1          1111111111111111111111111111111111111
           1111111111111111  1                                         1111111111111111111111111111111111111     
           1111111111111111                                                 11111111111111111111111111111111
           11111111111111111                        1111111111111               1111111111111111111111111111
           11111111111111111                        1111111111111               111111111111111111111111111
           111111111111111111                       1111111111111              1111111111111111111111111111        
           11111111111111111111                      111111111111             11111111111111111111111111111
           1111111111111111111111111                  1111111111             11111111111111111111111111111 
           1111111111111111111111111111111111           111 1          11111111111111111111111111111111111       
           1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
            111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
            11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
             111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111            
              11111111111111111111111111111111111111111111         11111111111111111111111111 11111111
               111 11111111111111111  1111 1111111111 1111111        1111111111   1111111    1111111
                                  111       111111111  111111111111111111111             1111111111  11
             11111                        1111111111111 11  111111111111111111         111111        11111         
            11111     1                  111111111111111111111111111111111111111               11      1 
                     111     111        111111111111111111111111111111111 11111        11     1111
                    1111     111        111111111111111111111111111111111  111         111     111               
                             111         11111111111111111111111111111111111111        111
                                           111111111111  1111111111111111111111                                
                                               111         1111111111111111          
```

---

### AAの構造をできるだけ小さくする
```JavaScript
const temp = `{スペースと1でできたAA文字列}`
const zipBase64Str = require("zlib").deflateSync(temp).toString("base64")
console.log(zipBase64Str.length) // -> 564
console.log(zipBase64Str)
// -> eJzVmFFywyAMRP99Cq7A/S/XcSEEgbRaIT5aTWbiOGifVrYJ4SnxqEo8WYFjQUYsqBqS5JVPZDntY2VfPSX9G5oqZOaRFbq6og8Rtwhr8yziPd4bBuWafhfDptqALKi9mpDKEeVsZSILH8LgrL4Mb0sHaj+aO9OO549d3q7LAI1qd28zKNJq25ocxerxRB17j2NyA8xsOSsKVZdEVcVZVtLB6f3UR7eUNJVgyUchEbS/6WzaIkUMUbyxsQt5jfuEWMlqVINETobpwZYJFtO8Sh7Imk/6/t3u7L10JKZxapJLxPa+7SsgWJhwBmpace9FgmCkQDINYabWKTiYaqUU4gaiYcXoWLSLsmZMDEbGnklDg/4KDN8kcRby9Rnj3Zg+lEZyDwGC8ajAjLIIVzmp+LnaLx2RlQhvav6HpNjS5DxmSmLtRSSNr5R/CNbysuzpO+j7YTrPbZ6tWtY/B70t77FynQBP2IFzmmJ2fLffhO3IQdqxZfV3uJEiFjs+YvEzsqw9lAOEWH0pCj3c3UlRBt89y4wNkqUDaStCe+QFm5tUfwAWyvQI
```
zip圧縮&Base64エンコード

---

### おわり
ありがとうございました！

---

---

### ロジックを入れる
```JavaScript
(f=(count)=>{
    count++;
    console.log('(f='+f+')('+count+')');
})(0)
```
 - 引数部分に出力される値が実行のたびに変わる
 - 実行回数に従い、引数の値が増える

---
